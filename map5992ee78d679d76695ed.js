!function(e){function t(t){for(var a,l,i=t[0],c=t[1],u=t[2],s=0,f=[];s<i.length;s++)l=i[s],Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&f.push(o[l][0]),o[l]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);for(d&&d(t);f.length;)f.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,i=1;i<n.length;i++){var c=n[i];0!==o[c]&&(a=!1)}a&&(r.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},o={2:0},r=[];function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var d=c;r.push([97,0]),n()}({97:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=a(n(7)),r=a(n(0)),l=n(98),i=document.getElementById("root");o.default.render(r.default.createElement(l.PageInfoMap,null),i)},98:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PageInfoMap=void 0;var o=a(n(0)),r=n(99);t.PageInfoMap=function(){var e=o.default.useState("y"),t=(e[0],e[1]);return o.default.useEffect((function(){var e=new URL(window.location.href).searchParams.get("m");e&&t(e)}),[]),o.default.createElement(r.LeafletInfoMap,null)}},99:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LeafletInfoMap=void 0;var o=a(n(0)),r=a(n(34));n(35),n(36),n(37);var l=r.default.tileLayer,i=r.default.map,c=r.default.MarkerClusterGroup,u=r.default.marker,d=r.default.DivIcon,s=n(38)("1SQITOMPJN","2f1a6c924bc9f33235bb98e570053a79"),f=i(document.getElementById("map"),{zoomControl:!1});t.LeafletInfoMap=function(){var e=o.default.useState([]),t=e[0],n=e[1],a=o.default.useState([]),i=a[0],p=a[1],m=o.default.useState({}),v=m[0],h=m[1],g=o.default.useState(),b=g[0],y=g[1],E=o.default.useState(),_=E[0],k=E[1],C=o.default.useState(),x=C[0],L=C[1];return o.default.useEffect((function(){document.querySelector(".leaflet-bottom.leaflet-right").innerHTML="",f.setView([54.339248,29.39981],8);var e=r.default.layerGroup();l("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:10}).addTo(e),l("https://raw.githubusercontent.com/shappoff/storage/rkka_v4_and_2v_jan20/tiles/Z{z}/{y}/{x}.jpg",{minZoom:11,maxZoom:14}).addTo(e);var t=l("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:14}),n=l("https://raw.githubusercontent.com/shappoff/storage/rkka_v4_and_2v_jan20/tiles/Z{z}/{y}/{x}.jpg",{maxZoom:14}),a=(r.default.tileLayer("http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]}),r.default.tileLayer("http://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]}));e.addTo(f);var o={"Смешанная карта":e,"Старая карта":n,"Современная карта":t,"Гугл Спутник":a};r.default.control.layers(o,{},{position:"topleft",collapsed:!1}).addTo(f),r.default.control.zoom({position:"bottomleft"}).addTo(f),s.initIndex("censuslocations").search("",{filters:"_tags:no_geoloc"}).then((function(e){var t=e.hits;p(t)}))}),[]),o.default.useEffect((function(){s.initIndex("censuslocations").search("",{facets:["*"],filters:"_tags:geoloc",facetFilters:[[b?"region:".concat(b):""],[_?"area:".concat(_):""],[x?"selsovet:".concat(x):""]]}).then((function(e){var t=e.hits,a=e.facets;n(t),h(a)}))}),[b,_,x]),o.default.useEffect((function(){if(t&&(!t||t.length)){var e=new c({spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,animate:!0,maxClusterRadius:20,removeOutsideVisibleBounds:!0});return t.forEach((function(t){var n=t.title,a=t._geoloc,o=t.stats,l=t.selsovet,i=t.area,c=t.region,s=[];for(var p in o)o[p],s.push({year:p,count:o[p]});if(a.lat){var m=a.lat,v=a.lng,h=u([m,v],{title:"".concat(i," р-н, ").concat(l," c/c"),icon:new d({html:"<b>".concat(n,"</b>"),className:"marker-div-icon"})}),g=document.createElement("div"),b=document.createElement("b");b.innerText=n,g.appendChild(b),s.forEach((function(e,t){var n=document.createElement("div");n.innerText="".concat(e.year," год: ").concat(e.count," фамилий"),n.setAttribute("key",t.toString()),g.appendChild(n)}));var y=document.createElement("i");y.innerText="Всего записей: ".concat(s.reduce((function(e,t){return e+t.count}),0)),g.appendChild(y);var E=document.createElement("div");E.innerText="сменить",E.setAttribute("title","Сменить или уточнить геолокацию"),E.classList.add("indicate-button"),E.addEventListener("click",(function(){var e=document.getElementById("map");r.default.DomUtil.addClass(e,"crosshair-cursor-enabled");var t=function(a){var o=a.latlng,u=o.lat,d=o.lng,s="change: ".concat(c,";").concat(i,";").concat(l,";\n`").concat(n,"`;\n`").concat(u,", ").concat(d,"`\n[ordaOfBy](https://orda.of.by/.map/?").concat(u,",").concat(d,"&m=1v/14,wig/13,wig_v2/14,wig250/14,rkka/14,rkka_v2/14,rkka250/14,rkka2km/12,3v/13,3v_tmp56/13,3v_tmp71/13,kdwr/13,nem25/14,2v/13,polv/13,austr/13)");console.log(s),r.default.DomUtil.removeClass(e,"crosshair-cursor-enabled"),f.off("click",t),alert("Координаты отправлены!")};setTimeout((function(){f.on("click",t),h.closePopup()}))})),g.appendChild(E),h.bindPopup(g),e.addLayer(h)}})),f.addLayer(e),f.fitBounds(e.getBounds()),function(){f.removeLayer(e)}}}),[t]),o.default.useEffect((function(){var e=r.default.control({position:"topleft"});return v&&v.region&&(e.onAdd=function(e){var t=r.default.DomUtil.create("div","info region"),n=document.createElement("select");n.addEventListener("change",(function(e){y(~e.target.value.indexOf("округ")?"":e.target.value)}));var a=document.createElement("option");for(var o in a.innerText="округ",a.setAttribute("value",""),n.appendChild(a),v.region){var l=document.createElement("option");l.innerText=o,l.setAttribute("value",o),o!==b&&1!==Object.keys(v.region).length||l.setAttribute("selected","true"),n.appendChild(l)}return t.appendChild(n),t},e.addTo(f)),function(){f.removeControl(e)}}),[v.region]),o.default.useEffect((function(){var e=r.default.control({position:"topleft"});return v&&v.area&&(e.onAdd=function(e){var t=r.default.DomUtil.create("div","info area"),n=document.createElement("select");n.addEventListener("change",(function(e){k(~e.target.value.indexOf("район")?"":e.target.value)}));var a=document.createElement("option");for(var o in a.innerText="район",a.setAttribute("value",""),n.appendChild(a),v.area){var l=document.createElement("option");l.innerText=o,l.setAttribute("value",o),o!==_&&1!==Object.keys(v.area).length||l.setAttribute("selected","true"),n.appendChild(l)}return t.appendChild(n),t},e.addTo(f)),function(){f.removeControl(e)}}),[v.area]),o.default.useEffect((function(){var e=r.default.control({position:"topleft"});return v&&v.selsovet&&(e.onAdd=function(e){var t=r.default.DomUtil.create("div","info selsovet"),n=document.createElement("select");n.addEventListener("change",(function(e){L(~e.target.value.indexOf("сельсовет")?"":e.target.value)}));var a=document.createElement("option");for(var o in a.innerText="сельсовет",a.setAttribute("value",""),n.appendChild(a),v.selsovet){var l=document.createElement("option");l.innerText=o,l.setAttribute("value",o),o===x&&l.setAttribute("selected","true"),n.appendChild(l)}return t.appendChild(n),t},e.addTo(f)),function(){f.removeControl(e)}}),[v.selsovet]),o.default.useEffect((function(){var e={};i.sort((function(e,t){return e.title<t.title?-1:1})).forEach((function(t){var n,a,o;e[t.region]?!e[t.region]||e[t.region][t.area]?e[t.region]&&e[t.region][t.area]&&!e[t.region][t.area][t.selsovet]?e[t.region][t.area][t.selsovet]=[t.title]:e[t.region]&&e[t.region][t.area]&&e[t.region][t.area][t.selsovet]&&e[t.region][t.area][t.selsovet].push(t.title):e[t.region][t.area]=((o={})[t.selsovet]=[t.title],o):e[t.region]=((n={})[t.area]=((a={})[t.selsovet]=[t.title],a),n)}));var t=r.default.control();return t.onAdd=function(e){return this._div=r.default.DomUtil.create("div","info-not-found-villages"),this.update(),this._div},t.update=function(t){var n=document.createElement("details");n.addEventListener("click",(function(e){var t=e.target,a=!t.parentElement.hasAttribute("open");t.classList.contains("selsovet")&&([].forEach.call(n.querySelectorAll(".okrug-list > li"),(function(e){e.contains(t)||[].forEach.call(e.querySelectorAll("[open]"),(function(e){return e.removeAttribute("open")}))})),a?(y(""),k(""),L(t.getAttribute("value"))):L(""))}));var a=document.createElement("summary");a.classList.add("root"),a.innerHTML="Список не найденных на карте н.п.",n.appendChild(a);var o=document.createElement("ul");o.classList.add("okrug-list");var l=function(t){var n=document.createElement("li"),a=document.createElement("details");a.classList.add("okrug");var l=document.createElement("summary");l.classList.add("okrug"),l.innerHTML="".concat(t," округ"),a.appendChild(l);var i=document.createElement("ul"),c=function(n){var a=document.createElement("li"),o=document.createElement("details"),l=document.createElement("summary");l.classList.add("raion"),l.innerHTML="".concat(n," район"),o.appendChild(l);var c=document.createElement("ul"),u=function(a){var o=document.createElement("li"),l=document.createElement("details"),i=document.createElement("summary");i.classList.add("selsovet"),i.setAttribute("value",a),i.innerHTML="".concat(a," с/с"),l.appendChild(i),a===x&&l.setAttribute("open",null);var u=document.createElement("ul"),d=function(o){var l=document.createElement("li"),i=document.createElement("span"),c=e[t][n][a][o];i.innerHTML="".concat(c);var d=document.createElement("span");d.innerHTML="указать",d.classList.add("indicate-button"),d.setAttribute("title","Указать геолокацию этого н.п."),d.addEventListener("click",(function(){var e=document.getElementById("map");r.default.DomUtil.addClass(e,"crosshair-cursor-enabled");var o=function(i){var u=i.latlng,d=u.lat,s=u.lng,p="new: ".concat(t,";").concat(n,";").concat(a,";\n`").concat(c,"`;\n`").concat(d,", ").concat(s,"`\n[ordaOfBy](https://orda.of.by/.map/?").concat(d,",").concat(s,"&m=1v/14,wig/13,wig_v2/14,wig250/14,rkka/14,rkka_v2/14,rkka250/14,rkka2km/12,3v/13,3v_tmp56/13,3v_tmp71/13,kdwr/13,nem25/14,2v/13,polv/13,austr/13)");console.log(p),r.default.DomUtil.removeClass(e,"crosshair-cursor-enabled"),f.off("click",o),alert("Координаты отправлены!"),l.remove()};setTimeout((function(){f.on("click",o)}))})),l.appendChild(i),l.appendChild(d),u.appendChild(l)};for(var s in e[t][n][a])d(s);l.appendChild(u),o.appendChild(l),c.appendChild(o)};for(var d in e[t][n])u(d);o.appendChild(c),a.appendChild(o),i.appendChild(a)};for(var u in e[t])c(u);a.appendChild(i),n.appendChild(a),o.appendChild(n)};for(var i in e)l(i);n.appendChild(o),this._div.appendChild(n)},t.addTo(f),function(){f.removeControl(t)}}),[i]),null}}});