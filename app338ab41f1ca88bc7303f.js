!function(e){function t(t){for(var n,u,c=t[0],o=t[1],i=t[2],s=0,d=[];s<c.length;s++)u=c[s],Object.prototype.hasOwnProperty.call(l,u)&&l[u]&&d.push(l[u][0]),l[u]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);for(f&&f(t);d.length;)d.shift()();return r.push.apply(r,i||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,c=1;c<a.length;c++){var o=a[c];0!==l[o]&&(n=!1)}n&&(r.splice(t--,1),e=u(u.s=a[0]))}return e}var n={},l={1:0},r=[];function u(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,u),a.l=!0,a.exports}u.m=e,u.c=n,u.d=function(e,t,a){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},u.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(u.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)u.d(a,n,function(t){return e[t]}.bind(null,n));return a},u.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="";var c=window.webpackJsonp=window.webpackJsonp||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var i=0;i<c.length;i++)t(c[i]);var f=o;r.push([42,0,3]),a()}({42:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=n(a(7)),r=n(a(0)),u=n(a(47)),c=document.getElementById("root");l.default.render(r.default.createElement(u.default,null),c)},47:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=n(a(0));a(48);var r=n(a(50)),u={apiKey:"AIzaSyASovzT2akPQV_-wkyLwc2d6WquAySjBio",authDomain:"census-auth.firebaseapp.com",projectId:"census-auth",storageBucket:"census-auth.appspot.com",messagingSenderId:"84703248098",appId:"1:84703248098:web:05c8d9c32e8fea83b7a8bb"},c=n(a(61));r.default.initializeApp(u);t.default=function(){var e=l.default.useState(!1),t=e[0],a=e[1];return t?l.default.createElement(c.default,null):l.default.createElement("button",{className:"btn btn-primary type-table",onClick:function(){Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0);var e=new r.default.auth.GoogleAuthProvider,t=r.default.app().auth();t.setPersistence(r.default.auth.Auth.Persistence.SESSION).then((function(){t.signInWithPopup(e).then((function(e){e.additionalUserInfo.isNewUser?(e.user.delete(),a(!1),console.info("There no access!")):a(!0)})).catch((function(e){console.error(e)}))}))}},"Google")}},61:function(e,t,a){"use strict";var n=this&&this.__spreadArray||function(e,t,a){if(a||2===arguments.length)for(var n,l=0,r=t.length;l<r;l++)!n&&l in t||(n||(n=Array.prototype.slice.call(t,0,l)),n[l]=t[l]);return e.concat(n||Array.prototype.slice.call(t))},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=l(a(0)),u=l(a(62)),c=l(a(63)),o=a(68),i=a(94),f=a(38)("1SQITOMPJN","2f1a6c924bc9f33235bb98e570053a79");t.default=function(){var e=r.default.useState("y"),t=(e[0],e[1]),a=r.default.useState(""),l=a[0],s=a[1],d=r.default.useState(!1),m=d[0],p=d[1],h=r.default.useState(!0),v=h[0],g=h[1],E=r.default.useState([]),y=E[0],b=E[1],_=r.default.useState([]),w=_[0],S=_[1],k=r.default.useState([]),N=k[0],x=k[1],M=r.default.useState({}),O=M[0],P=M[1],j=r.default.useState({}),L=(j[0],j[1]),D=r.default.useState(0),C=(D[0],D[1]),I=r.default.useState([]),T=I[0],A=I[1],Z=r.default.useState([]),H=Z[0],B=Z[1],z=r.default.useState(f.initIndex("census")),R=z[0],F=(z[1],(0,u.default)(l,1e3));return r.default.useEffect((function(){var e=new URL(window.location.href).searchParams.get("m");e&&t(e),f.initIndex("censuslocations").search("",{}).then((function(e){var t=e.hits;S(t)}))}),[]),r.default.useEffect((function(){R.search("",{hitsPerPage:0,facets:["*"]}).then((function(e){var t=e.facets,a=e.nbHits;P(t),L(t),C(a)}))}),[T]),r.default.useEffect((function(){R.search(F,{facets:["*"],typoTolerance:v,facetFilters:[n([],H.map((function(e){return"place:".concat(e)})),!0),n([],T.map((function(e){return"selsovet:".concat(e)})),!0)]}).then((function(e){var t=e.hits,a=e.facets;if(F.length>1){b(t);var n=[];w.forEach((function(e){var a=e.title,l=e._geoloc,r={},u=!1;t.forEach((function(e){var t=e.place,n=e.year;t===a&&(u=!0,r[n]?r[n]+=1:r[n]=1)})),u&&n.push({title:a,stats:r,_geoloc:l})})),x(n)}!H.length&&T.length&&P(a)}))}),[F,H.length,T.length,v]),r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{className:"filter-panel"},r.default.createElement(o.DropDownComponent,{placeholder:"Сельсовет 1925 - 1926 г.",items:O&&O.selsovet?Object.keys(O.selsovet).sort().map((function(e){return{value:e,label:e}})):[],changeHandler:function(e){A(e.map((function(e){return e.value})))}}),r.default.createElement(o.DropDownComponent,{placeholder:"Населенный пункт",items:O&&O.place?Object.keys(O.place).sort().map((function(e){return{value:e,label:e}})):[],changeHandler:function(e){B(e.map((function(e){return e.value})))}}),r.default.createElement("div",{className:"form-check form-switch"},r.default.createElement("input",{className:"form-check-input",type:"checkbox",role:"switch",id:"flexSwitchCheckDefault",onChange:function(e){return g(!e.target.checked)}}),r.default.createElement("label",{className:"form-check-label",htmlFor:"flexSwitchCheckDefault"},"Точный поиск"))),r.default.createElement("input",{autoFocus:!0,onInput:function(e){var t=e.target;s(t.value)},onChange:function(e){27==e.which&&(s(""),b([]))},type:"text",value:l,id:"input",placeholder:"Фамилия, Имя, Отчество"}),r.default.createElement("ul",{className:"nav nav-tabs"},r.default.createElement("li",{className:"nav-item"},r.default.createElement("a",{className:m?"nav-link":"nav-link active",onClick:function(){p(!1)},"aria-current":"page",href:"#"},"Таблица результатов")),r.default.createElement("li",{className:"nav-item"},r.default.createElement("a",{className:m?"nav-link active":"nav-link",onClick:function(){p(!0)},"aria-current":"page",href:"#"},"Карта результатов"))),m?r.default.createElement(i.LeafletMapResults,{hits:N}):r.default.createElement(c.default,{hits:y}))}},62:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(0);t.default=function(e,t){var a=(0,n.useState)(e),l=a[0],r=a[1];return(0,n.useEffect)((function(){var a=setTimeout((function(){r(e)}),t);return function(){clearTimeout(a)}}),[e]),l}},63:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=n(a(0)),r=n(a(64)),u=n(a(100)),c=n(a(26));t.default=function(e){var t=e.hits;return l.default.createElement(l.default.Fragment,null,t.length?l.default.createElement("table",{className:"table table-striped"},l.default.createElement("thead",{className:"desktop-version"},l.default.createElement("tr",null,l.default.createElement("th",null,"ФИО"),l.default.createElement("th",null,"Нас.пункт"),l.default.createElement("th",null,"Всего душ"),l.default.createElement("th",null,"Мужчин"),l.default.createElement("th",null,"Женщин"),l.default.createElement("th",null,"Грамотных"),l.default.createElement("th",null,"Отсутствует более месяца"),l.default.createElement("th",null,"Национальность"),l.default.createElement("th",null,"год"),l.default.createElement("th",null,"Заметки"))),l.default.createElement("tbody",{id:"list-of-res"},t.sort((function(e,t){return e.fio.localeCompare(t.fio)})).map((function(e,t){var a,n=e.fod,o=e.page,i=e.place,f=e.year,s=e.total,d=e.notes,m=e.male,p=e.female,h=e.literate,v=e.absent,g=e.nationality,E=e.region,y=e.selsovet,b=e.area,_=e._highlightResult,w="".concat(y," сельсовет, ").concat(b," район, ").concat(E," округ"),S="\nВсего душ: ".concat(s,";\n").concat(~m.toString().indexOf("-")?"":"Мужчин: ".concat(m,";"),"\n").concat(~p.toString().indexOf("-")?"":"Женщин: ".concat(p,";"),"\n").concat(~h.toString().indexOf("-")?"":"Грамотных: ".concat(h,";"),"\n").concat(~v.toString().indexOf("-")?"":"Отсутствует более месяца: ".concat(v,";"),"\n").concat(g?"Нацианальность: ".concat(g,";"):"","\n");return l.default.createElement("tr",{key:t,className:"born-item"},l.default.createElement("td",{className:"born-name-tr"},l.default.createElement("i",{className:"mobile-version"},"ФИО: "),l.default.createElement("span",{dangerouslySetInnerHTML:{__html:null===(a=null==_?void 0:_.fio)||void 0===a?void 0:a.value}})),l.default.createElement("td",{className:"td-place-location"},l.default.createElement(u.default,{placement:"right",overlay:l.default.createElement(c.default,{id:"tooltip-rigth"},w)},l.default.createElement("span",null,l.default.createElement("span",null,i),l.default.createElement("svg",{id:"Layer_1","data-name":"Layer 1",style:{width:"2px",marginLeft:"5px"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 29.96 122.88"},l.default.createElement("path",{className:"cls-1",d:"M15,0A15,15,0,1,1,0,15,15,15,0,0,1,15,0Zm0,92.93a15,15,0,1,1-15,15,15,15,0,0,1,15-15Zm0-46.47a15,15,0,1,1-15,15,15,15,0,0,1,15-15Z"}))))),l.default.createElement("td",{className:"mobile-version"},l.default.createElement(u.default,{placement:"auto",overlay:l.default.createElement(c.default,{id:"tooltip-left"},S)},l.default.createElement("img",{title:S,alt:S,src:r.default}))),l.default.createElement("td",{className:"desktop-version"},s),l.default.createElement("td",{className:"desktop-version"},m),l.default.createElement("td",{className:"desktop-version"},p),l.default.createElement("td",{className:"desktop-version"},h),l.default.createElement("td",{className:"desktop-version"},v),l.default.createElement("td",{className:"desktop-version"},g),l.default.createElement("td",null,l.default.createElement(u.default,{placement:"auto",overlay:l.default.createElement(c.default,{id:"tooltip-rigth"},"".concat(n,", лл. ").concat(o))},l.default.createElement("span",null,l.default.createElement("span",null,f),l.default.createElement("svg",{id:"Layer_1","data-name":"Layer 1",style:{width:"2px",marginLeft:"5px"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 29.96 122.88"},l.default.createElement("path",{className:"cls-1",d:"M15,0A15,15,0,1,1,0,15,15,15,0,0,1,15,0Zm0,92.93a15,15,0,1,1-15,15,15,15,0,0,1,15-15Zm0-46.47a15,15,0,1,1-15,15,15,15,0,0,1,15-15Z"}))))),l.default.createElement("td",{className:"note-info"},d?l.default.createElement(u.default,{placement:"left",overlay:l.default.createElement(c.default,{id:"tooltip-left"},d)},l.default.createElement("img",{title:d,alt:d,src:r.default})):null))})))):null)}},64:function(e,t,a){"use strict";a.r(t),t.default=a.p+"6bf7218d9613f3b06b50745912c1826e.svg"},68:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DropDownComponent=void 0;var l=n(a(0)),r=n(a(101));t.DropDownComponent=function(e){var t=e.items,a=e.changeHandler,n=e.placeholder;return l.default.createElement(r.default,{placeholder:n,isMulti:!0,name:"colors",options:t,className:"basic-multi-select",classNamePrefix:"select",onChange:a})}},94:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LeafletMapResults=void 0;var l=n(a(0)),r=a(34);a(35),a(36),a(37);t.LeafletMapResults=function(e){var t=e.hits,a=l.default.useState(),n=a[0],u=a[1],c=l.default.createRef();return l.default.useEffect((function(){var e=(0,r.map)(c.current);e.setView([54.339248,29.39981],8),(0,r.tileLayer)("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:10}).addTo(e),(0,r.tileLayer)("https://raw.githubusercontent.com/shappoff/storage/main/tiles/Z{z}/{y}/{x}.jpg",{minZoom:11,maxZoom:14}).addTo(e),document.querySelector(".leaflet-bottom.leaflet-right").innerHTML="",u(e)}),[]),l.default.useEffect((function(){if(t&&(!t||t.length)){var e=new r.MarkerClusterGroup({spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,animate:!0});return t.forEach((function(t){var a=t.title,n=t._geoloc,l=t.stats,u=[];for(var c in l)l[c],u.push({year:c,count:l[c]});if(n.lat){var o=(0,r.marker)([n.lat,n.lng],{title:a,icon:new r.DivIcon({html:"<b>".concat(a,"</b>"),className:"marker-div-icon"})});o.bindPopup("<b>".concat(a,"</b>\n                        ").concat(u.map((function(e,t){return"<div key=".concat(t,">").concat(e.year," год: Найдено ").concat(e.count," фамилий</div>")})).join(""),"\n                        <i>\n                            Всего найдено: ").concat(u.reduce((function(e,t){return e+t.count}),0),"\n                        </i>")),e.addLayer(o)}})),n&&e.getLayers().length&&(n.fitBounds(e.getBounds()),n.addLayer(e)),function(){e.clearLayers()}}}),[t.length,t,n]),l.default.createElement("div",{id:"map",ref:c})}}});